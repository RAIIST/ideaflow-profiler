<main>
  <header>
    <main>
      <h1>IdeaFlow Timeline</h1>

      <div *ngIf="activeSubtask == null" class="breadcrumb flat">
        <a href="/#/home">Home</a>
        <a class="active" (click)="zoomOut()">Task: {{taskDetail?.task?.name}}</a>
      </div>

      <div *ngIf="activeSubtask != null" class="breadcrumb flat">
        <a href="/#/home">Home</a>
        <a (click)="goToTopLevelTask()">Task: {{taskDetail?.task?.name}}</a>
        <a class="active" *ngIf="activeSubtask" href="#">Subtask: {{taskDetail?.task?.name}}</a>
      </div>

    </main>
    <aside>
      <md-input-container>
        <input md-input type="search"/>
        <md-icon>search</md-icon>
      </md-input-container>
    </aside>
  </header>
  <main>
    <h2>
      {{taskDetail?.task?.name}} - {{taskDetail?.task?.description}}
    </h2>
    <md-card>
      <main>
        <app-timeline *ngIf="activeTimeline" [activeTimeline]="activeTimeline"></app-timeline>
      </main>
    </md-card>

    <div>
      <button *ngFor="let link of panelLinks" (click)="goToPanel(link);">
        <b>{{link}}</b>
      </button>
    </div>

    <app-haystack *ngIf="activePanel == 'haystack'" [id]="taskDetail?.task?.id"
                  [subtasks]="taskDetail?.ideaFlowStory?.subtasks"
                  [activeSubtask]="activeSubtask"
                  (activeSubtaskUpdated)="handleActiveSubtaskUpdated($event)"></app-haystack>

    <app-journey *ngIf="activePanel == 'pain'" [id]="taskDetail?.task?.id"
                 [subtasks]="taskDetail?.ideaFlowStory?.subtasks"
                 [activeSubtask]="activeSubtask"
                 (activeSubtaskUpdated)="handleActiveSubtaskUpdated($event)"></app-journey>

    <app-metrics *ngIf="activePanel == 'metrics'" [id]="taskDetail?.task?.id"
                 [subtasks]="taskDetail?.ideaFlowStory?.subtasks"
                 [activeSubtask]="activeSubtask"
                 [taskDetail]="taskDetail"
                 (activeSubtaskUpdated)="handleActiveSubtaskUpdated($event)"></app-metrics>



    <!--//nav here, that sets a ng model object with a flag based on the active selection-->
    <!--//the activeFullPath will be the zoom in coordinate, active on all views-->
    <!--//toggling across the different views will show group: [Haystacks], [Pain], [Metrics]-->
    <!--//if only one, zoom in automatically to the subtask.-->

    <!--<app-journey *ngIf="taskDetail?.ideaFlowStory?.subtasks.length > 0" [id]="taskDetail?.task?.id"-->
    <!--[subtasks]="taskDetail?.ideaFlowStory?.subtasks"></app-journey>-->
  </main>
</main>

