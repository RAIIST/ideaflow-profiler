<main>

  <main>

    <table class="mdl-data-table highlight">
      <thead>
      <tr>
        <th></th>
        <th>
          <button md-button>Activity Type</button>
        </th>
        <th>
          <button md-button>Description</button>
        </th>
        <th>
          <button md-button>Execution Time</button>
        </th>
        <th>
          <button md-button>Human Cycle Time</button>
        </th>
      </tr>
      </thead>
      <tbody>

      <ng-container *ngFor=" let haystack of allHaystacks; let i = index;">

        <tr (click)="toggleExpandedHaystack(haystack)" class="haystack">
          <td>
            <i [class]="haystack.isExpanded? 'material-icons rotate-90': 'material-icons'">play_arrow</i>
            <span *ngIf="haystack.debug">
                <i class="material-icons" style="color:green">bug_report</i>
              </span>
          </td>
          <td>
              <span [style.color]="haystack.failed? 'red' : 'green'">
              {{haystack.executionTaskType}}
              </span>
          </td>
          <td>
            {{haystack.processName}}
          </td>
          <td style="text-align: right">
            {{ formatShortDuration(haystack.executionDurationInSeconds) }}
          </td>
          <td>
            {{formatShortDuration(haystack.durationInSeconds) }}
          </td>

        </tr>

        <ng-container *ngIf="haystack.isExpanded">
          <ng-container *ngFor="let activity of haystack.activitySummaries; let j = index;">
            <tr class="activity">

              <td></td>
              <td>
                {{activity.activityType | capitalize}}
              </td>
              <td>
                {{activity.activityName}}
              </td>
              <td style="text-align: right">
                {{formatShortDuration(activity.durationModifiedInSeconds) }}
              </td>
              <td>
                {{formatShortDuration(activity.durationInSeconds) }}
              </td>
            </tr>
          </ng-container>
        </ng-container>

      </ng-container>
      </tbody>
    </table>

  </main>
</main>
